var settings={github_user:"alterebro",metadata:{title:"Github User Page Generator : alterebro.github.io",description:"Github User Page JavaCript Generator built with Vue.js that creates a dynamic page based on the existing data and repositories of a given GitHub user",url:"http://alterebro.github.io"}};settings.github_user=location.search.slice(1)||settings.github_user;var githubAPI={repos:"https://api.github.com/users/"+settings.github_user+"/repos?sort=pushed",user:"https://api.github.com/users/"+settings.github_user},data={user:settings.github_user,metadata:settings.metadata,user_data:{},repos:null,user_languages:{},user_languages_total:0,stars:0,forks:0,watching:0,status:"listen",error_msg:""},app=new Vue({el:"#app",data:data,created:function(){this.getUserData(),this.getReposData(),this.socialLinks()},filters:{filterdate:function(e){var t=new Date(e),a={d:("0"+t.getUTCDate()).slice(-2),m:("0"+(t.getUTCMonth()+1)).slice(-2),y:t.getUTCFullYear(),hh:("0"+t.getUTCHours()).slice(-2),mm:("0"+t.getUTCMinutes()).slice(-2)};return a.d+"."+a.m+"."+a.y+" @"+a.hh+":"+a.mm},autolinks:function(e){if(e){return e.replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g,'<a href="$1" target="_blank">$1</a> ')}},langpercent:function(e){return(e/this.user_languages_total*100).toFixed(1)},urlencode:function(e){return encodeURIComponent(e)}},methods:{setLanguages:function(e,t){data.repos[t].main_language=data.repos[t].language;var a=e,s=[];for(var r in a)s.push(r),r in data.user_languages?Vue.set(data.user_languages,r,data.user_languages[r]+a[r]):Vue.set(data.user_languages,r,a[r]);data.repos[t].language=s.join(", ");var n=0;for(var u in data.user_languages)n+=data.user_languages[u];data.user_languages_total=n},getLanguages:function(e,t){var a=this,s=(settings.github_user+"_repo_"+e).toLowerCase(),r=Cache.get(s);if(r)a.setLanguages(r,e);else{var n={};atomic.get(t).success(function(e,t){n=e,Cache.set(s,n)}).error(function(){}).always(function(){a.setLanguages(n,e)})}},setReposData:function(e){if(e.length>0){data.repos=e;for(var t=0;t<e.length;t++)data.stars+=e[t].stargazers_count,data.forks+=e[t].forks_count,data.watching+=e[t].watchers_count,this.getLanguages(t,e[t].languages_url);window.setTimeout(function(){document.querySelector("body").classList.remove("preload"),data.status="ready"},1e3)}else data.status="error"},getReposData:function(){var e=this,t=settings.github_user+"_repos".toLowerCase(),a=Cache.get(t);if(a)e.setReposData(a);else{var s=[];atomic.get(githubAPI.repos).success(function(e,a){s=e,Cache.set(t,s)}).error(function(){}).always(function(){e.setReposData(s)})}},setUserData:function(e){data.user_data=e},getUserData:function(){var e=this,t=settings.github_user+"_user".toLowerCase(),a=Cache.get(t);if(a)e.setUserData(a);else{var s={};atomic.get(githubAPI.user).success(function(e,a){s=e,Cache.set(t,s)}).error(function(t){e.error_msg=t.message}).always(function(){e.setUserData(s)})}},socialLinks:function(){for(var e=document.querySelectorAll("ul.social-share li a"),t=0;t<e.length;t++)e[t].onclick=function(e){e.preventDefault(),window.open(this.href,this.innerHTML.toLowerCase(),"height=350,width=600").focus()}}}});